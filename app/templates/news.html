{% extends "bootstrap/base.html" %}
{% block title %}
Новости ЦМАКП: администрилка

{% endblock %}

{% block styles %}
<!-- users styles here-->
{{ super() }}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.css">

{% endblock %}

<style type="text/css">
    td.custd { font-size : xx-small}
</style>

{% block head %}
{{ super() }}
<link rel="shortcut icon" href="{{ url_for('static', filename='cmasf.gif') }}" type="image/x-icon>">
<link rel="icon" href="{{ url_for('static', filename='cmasf.gif') }}" type="image/x-icon>">
{% endblock %}

{% block navbar %}
{{ super() }}
<div class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle"
                    data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Включить навигацию</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Oh, well, Flasky</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="http://www.forecast.ru" target="_blank">FORECAST.RU</a></li>
                <li><a href="http://www.forecast.ru" target="_blank">Telegram</a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container container-fluid">
    <div class="page-header">
        <h1>Новости Центра:</h1>
    </div>

    <table id="data" class="table table-striped table-bordered table-condensed">
        <thead class="text-center thead-dark">
            <th width="5%">№</th>
            <th width="10%">Дата</th>
            <th width="80%">Новость</th>
            <th width="5%">Видима</th>
        </thead>
        <tbody>

        </tbody>
    </table>

</div>
{% endblock %}

{% block scripts %}
{{ super() }}

<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.js"></script>
<script src="cdn.datatables.net/plug-ins/1.10.21/dataRender/datetime.js" charset="utf8"></script>

<script>
$(document).ready(function () {

  $('#data').DataTable({
        ajax: '/api/data',
        serverSide: true,
        order:[[1, 'desc']],
        columnDefs: [
            {
                targets: [1, 2, 3],
                createdCell: function (td, cellData, rowData, row, col) {
                    $(td).css('font-size', 'small');
                }
            },
            { targets: [0],
            createdCell: function (td, cellData, rowData, row, col) {
                $(td).css('font-size', 'x-small');}

        } ],
        // processing: true,
        lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
        language: {
            search: "Поиск",
            searchPlaceholder: "Часть текста новости"},

        columns: [
          {data: 'ID', orderable: false, searchable: false, width:"5%", className: "custd"},
          {data: 'NDate', searchable: false, orderable:true, width:"10%"},
          {data: 'NText', orderable: false, searchable: true, width:"80%",
              className: "custd"  },
          {data: 'IsVisible', orderable: false, searchable: false, width:"5%", className: "custd"}
        ],
      });
});
</script>
{% endblock %}
